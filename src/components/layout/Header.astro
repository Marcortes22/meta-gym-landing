---
interface Props {
  sticky?: boolean;
}

const { sticky = false } = Astro.props;
---

<header class={`fixed top-0 w-full z-50 backdrop-blur-md transition-all duration-300 ${sticky ? 'shadow-lg' : ''}`} style="background-color: rgba(14, 14, 16, 0.9);">
  <nav class="mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16 lg:h-20">
      
      <div class="flex-shrink-0">
        <img src="/MetaGym.png" alt="Meta Gym" class="h-10 w-auto">
      </div>
      
      <div class="hidden md:flex items-center space-x-8">
        <ul class="flex space-x-8">
          <li>
            <a 
              href="#problemas" 
              class="relative text-white font-medium pb-1 transition-colors duration-300 hover:text-white group"
            >
              Problemas
              <span class="absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full" style="background-color: #e04a36;"></span>
            </a>
          </li>
          <li>
            <a 
              href="#beneficios" 
              class="relative text-white font-medium pb-1 transition-colors duration-300 hover:text-white group"
            >
              Beneficios
              <span class="absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full" style="background-color: #e04a36;"></span>
            </a>
          </li>
          <li>
            <a 
              href="#funciones" 
              class="relative text-white font-medium pb-1 transition-colors duration-300 hover:text-white group"
            >
              Funciones
              <span class="absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full" style="background-color: #e04a36;"></span>
            </a>
          </li>
          <li>
            <a 
              href="#planes" 
              class="relative text-white font-medium pb-1 transition-colors duration-300 hover:text-white group"
            >
              Planes
              <span class="absolute bottom-0 left-0 w-0 h-0.5 transition-all duration-300 group-hover:w-full" style="background-color: #e04a36;"></span>
            </a>
          </li>
        </ul>
        
        <a 
          href="#planes" 
          class="text-white font-semibold px-5 py-2 rounded-full transition-all duration-300 hover:-translate-y-1 hover:shadow-lg active:translate-y-0"
          style="background-color: #e04a36;"
          onmouseenter="this.style.backgroundColor='#fe6b24'"
          onmouseleave="this.style.backgroundColor='#e04a36'"
        >
          Comenzar
        </a>
      </div>
      
      <button 
        class="md:hidden relative z-60 w-8 h-8 flex flex-col justify-center items-center group"
        id="mobile-menu-toggle"
      >
        <span class="block w-6 h-0.5 bg-white transition-all duration-300" id="line1"></span>
        <span class="block w-6 h-0.5 bg-white mt-1.5 transition-all duration-300" id="line2"></span>
        <span class="block w-6 h-0.5 bg-white mt-1.5 transition-all duration-300" id="line3"></span>
      </button>
    </div>
  </nav>
  
  <div 
    class="fixed inset-0 z-40 bg-black/80 transition-opacity duration-300 opacity-0 pointer-events-none md:hidden"
    id="mobile-overlay"
  ></div>
  

  <div 
    class="fixed top-0 right-0 h-full w-80 max-w-[85vw] transform translate-x-full transition-transform duration-300 ease-in-out z-50 md:hidden shadow-2xl bg-black border-l border-gray-600"
    id="mobile-menu"
  >
    <div class="flex flex-col h-full bg-black">
      <div class="flex items-center p-6 border-b border-gray-600 bg-black">
        <h2 class="text-xl font-bold text-white">MG</h2>
      </div>
      
      <nav class="flex-1 px-6 py-8 bg-black">
        <ul class="space-y-6">
          <li>
            <a 
              href="#problemas" 
              class="block text-white hover:text-red-400 transition-colors duration-200 font-medium text-lg py-2 px-3 rounded-lg hover:bg-gray-800"
            >
              Problemas
            </a>
          </li>
          <li>
            <a 
              href="#beneficios" 
              class="block text-white hover:text-red-400 transition-colors duration-200 font-medium text-lg py-2 px-3 rounded-lg hover:bg-gray-800"
            >
              Beneficios
            </a>
          </li>
          <li>
            <a 
              href="#funciones" 
              class="block text-white hover:text-red-400 transition-colors duration-200 font-medium text-lg py-2 px-3 rounded-lg hover:bg-gray-800"
            >
              Funciones
            </a>
          </li>
          <li>
            <a 
              href="#planes" 
              class="block text-white hover:text-red-400 transition-colors duration-200 font-medium text-lg py-2 px-3 rounded-lg hover:bg-gray-800"
            >
              Planes
            </a>
          </li>
        </ul>
        
        <div class="border-t border-gray-600 my-8"></div>

        <div>
          <a 
            href="#planes" 
            class="block w-full text-center text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 text-lg"
            style="background-color: #e04a36;"
            onmouseenter="this.style.backgroundColor='#fe6b24'"
            onmouseleave="this.style.backgroundColor='#e04a36'"
          >
            Comenzar
          </a>
        </div>
      </nav>
    </div>
  </div>
</header>

<script>

  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.getElementById('mobile-menu-toggle');
    const menu = document.getElementById('mobile-menu');
    const overlay = document.getElementById('mobile-overlay');
    const line1 = document.getElementById('line1');
    const line2 = document.getElementById('line2');
    const line3 = document.getElementById('line3');
    const body = document.body;
    
    function openMenu() {
      menu?.classList.remove('translate-x-full');
      overlay?.classList.remove('opacity-0', 'pointer-events-none');
      body.style.overflow = 'hidden';
      line1?.classList.add('rotate-45', 'translate-y-2');
      line2?.classList.add('opacity-0');
      line3?.classList.add('-rotate-45', '-translate-y-2');
    }
    
    function closeMenu() {
      menu?.classList.add('translate-x-full');
      overlay?.classList.add('opacity-0', 'pointer-events-none');
      body.style.overflow = '';
      line1?.classList.remove('rotate-45', 'translate-y-2');
      line2?.classList.remove('opacity-0');
      line3?.classList.remove('-rotate-45', '-translate-y-2');
    }
    
    toggle?.addEventListener('click', () => {
      if (menu?.classList.contains('translate-x-full')) {
        openMenu();
      } else {
        closeMenu();
      }
    });
    overlay?.addEventListener('click', closeMenu);
    const mobileLinks = menu?.querySelectorAll('a');
    mobileLinks?.forEach(link => {
      link.addEventListener('click', closeMenu);
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeMenu();
    });

    const navLinks = document.querySelectorAll('a[href^="#"]');
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href');
        const targetElement = targetId ? document.querySelector(targetId) : null;
        
        if (targetElement && targetElement instanceof HTMLElement) {
          const headerHeight = 80; 
          const elementPosition = targetElement.offsetTop - headerHeight;
          
          window.scrollTo({
            top: elementPosition,
            behavior: 'smooth'
          });
        }
      });
    });
  });
</script>